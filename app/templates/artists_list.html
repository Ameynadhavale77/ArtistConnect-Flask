{% extends "base.html" %}
{% block content %}
<h2>Browse Artists</h2>
<form method="get" class="filters">
  <input type="text" name="category" placeholder="Category (Singer, DJ...)" value="{{ q_category }}">
  <input type="text" name="location" placeholder="Location (Mumbai...)" value="{{ q_location }}">
  <button class="btn" type="submit">Filter</button>
</form>
<div class="grid">
  {% for prof in artists %}
    <div class="card">
      {% if prof.profile_image %}
        <div style="text-align: center; margin-bottom: 15px;">
          <img src="{{ url_for('static', filename='uploads/' + prof.profile_image) }}" 
               style="width: 80px; height: 80px; object-fit: cover; border-radius: 50%; border: 2px solid #eee;" 
               alt="Profile picture of {{ prof.user.name }}">
        </div>
      {% endif %}
      <h3>{{ prof.user.name }} 
        <span style="background: #0f3b1f; color: #b1f7c2; padding: 2px 6px; border-radius: 12px; font-size: 10px;">✅</span>
      </h3>
      <p class="muted">{{ prof.category }} · {{ prof.location }}</p>
      <p>{{ (prof.bio or '')[:120] }}{% if prof.bio and prof.bio|length>120 %}...{% endif %}</p>
      <a class="link" href="{{ url_for('artist_profile_view', user_id=prof.user.id) }}">View Profile →</a>
    </div>
  {% else %}
    <p>No artists match your filters yet.</p>
  {% endfor %}
</div>
{% endblock %}